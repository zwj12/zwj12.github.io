---
layout: post
title: "Alarm Message List (AML)"
date: 2022-01-26 08:35:00 +0800
author: Michael
categories: zenon
---

# 报警日志导出文件列设置
报警日志可以导出到CSV文件中，具体哪些列导出，那些列不导出，通过项目属性的Alarm Message List -> Column settings AML设置。  
![日志文件夹](/assets/zenon/AMLCSVColumn.png) 

# 报警来源
报警只能通过变量的Limit Values和Reaction matrices设置，当设置了"To acknowledge"后，变量一旦达到报警值，即使有重新回到合理范围后，报警信息还是在的，需要手动acknowledge才会小时，当然如果变量一直处于报警范围内，手动acknowledge是不可能消除报警信息的，但是会显示手动acknowledge时间。  

1. 变量进入报警范围，没有设置"To acknowledge"：一旦值恢复正常范围，报警自动消失。
2. 变量进入报警范围，设置"To acknowledge"：一旦值恢复正常范围，报警不会自动消失。必须手动acknowledge才会消失。
3. 变量进入报警范围，手动acknowledge不会消失，但是会设置手动acknowledge时间，一旦值恢复正常范围，报警自动消失。
4. 变量进入报警范围，设置"To acknowledge"，又恢复正常范围，再次进入报警范围。会有多条报警记录，且前面的报警会显示Cleared时间，手动acknowledge后，所有报警全部消失。

![日志文件夹](/assets/zenon/VariableAML.png)  
![日志文件夹](/assets/zenon/AlarmAcknowledged.png)  
![日志文件夹](/assets/zenon/AlarmCleared.png)  

# 顶部报警信息栏
通过Project->Alarm Message List->Alarm status line->Status line active设置。  
![日志文件夹](/assets/zenon/AlarmStatusLine.png)  

# 报警确认额外信息
如果设置了确认报警时必须输入额外信息，需要在Alarm Message List类型的Screen上添加Comment field控件，然后在点击acknowledge前需要先设置这个信息。  
如果设置了Alarm cause required，那么需要添加一个Context List类型的Screen，然后在这个页面上先设置cause信息。需要注意的是，设置name变量的值后，需要先按Enter回车键，否则Name控件失去焦点时，会丢失数据，导致不能添加。设置好Context List后，还需要在Alarm Message List类型的Screen上添加Select alarm cause控件。  
![日志文件夹](/assets/zenon/AlarmCommentRequied.png)  

# Two-stage acknowledgement
如果报警信息设置了二次确认要求，需要在页面上添加Confirm Acknowledgement按钮才能消除信息。  
![日志文件夹](/assets/zenon/ConfirmAcknowledgement.png)  

# 函数
ABB_UI_Activate page ABB bar Alarm list - 软件启动时调用
ABB_UI_Activate page Folding Alarm list - 打开悬浮报警窗
ABB_UI_Activate Picture Alarmlist - 活动报警窗
ABB_UI_Activate Picture Alarmlist_Archiv - 历史报警窗
ABB_UI_AlarmFilter - 报警过滤窗口


