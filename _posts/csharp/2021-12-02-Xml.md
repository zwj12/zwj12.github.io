---
layout: post
title: "Xml"
date: 2021-12-02 11:10:00 +0800
author: Michael
categories: CSharp
---

# XDocument and XmlDocument
从.NET 3.5开始，System.Xml.Linq.XDocument替代了System.Xml.XmlDocument对象，它更容易处理XML文档。

# XDocument保存到字符串或文件中
因为StringBuilder使用UTF-16编码，所以保存到字符串中时，不能自定义字符编码。

    XDocument xDocument = new XDocument();
    xDocument.Add(this.PMOPUserControlModel.Recipe.GetLayoutXElement());

    //both StringBuilder and String objects use UTF-16 encoding to store characters
    StringBuilder sb = new StringBuilder();
    XmlWriterSettings xws = new XmlWriterSettings();
    xws.Indent = true;
    using (XmlWriter xw = XmlWriter.Create(sb,xws))
    {
        xDocument.WriteTo(xw);
    }

    string str = sb.ToString();

	xDocument.Save(filePath);